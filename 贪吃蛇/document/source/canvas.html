<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/// &lt;reference path=&quot;enum.js&quot; /&gt;
/// &lt;reference path=&quot;goods.js&quot; /&gt;
/// &lt;reference path=&quot;player.js&quot; /&gt;

<span id='Canvas-method-constructor'><span id='Canvas'>/**
</span></span> * 画布:
 * @class Canvas
 * @constructor 构造函数
 * @param {String} element_id 画布所属元素Id.
 */
function Canvas(element_id, _width, _height) {
    if (_width === undefined) this.Width = 10;
    if (_height === undefined) this.Height = 10;

<span id='Canvas-property-element'>    /**
</span>     * 画布本身的DIV
     * @type {Element}
     * @private
     */
    var element = document.getElementById(element_id);
<span id='Canvas-property-Cells'>    /**
</span>     * 单元格内容
     * @type {Goods[]}
     * @private
     */
    this.Cells = [];
<span id='Canvas-property-Width'>    /**
</span>     * 宽度（横向格数）
     * @property {Number} Width
     */
    this.Width = _width + 2;
<span id='Canvas-property-Height'>    /**
</span>     * 高度（纵向格数）
     * @property {Number} Height
     */
    this.Height = _height + 2;
<span id='Canvas-property-Speed'>    /**
</span>     * 速度
     * @property {Number} [Speed=1000]
     */
    this.Speed = 1000;
<span id='Canvas-property-Players'>    /**
</span>     * 用户
     * @property {Player[]} Players
     */
    this.Players = [];

<span id='Canvas-method-Init'>    /**
</span>     * 初始化
     * @method Init
     */
    this.Init = function () {
        element.innerHTML = &quot;&quot;;
        var arr = [];
        for (var i = 0; i &lt; this.Height; i++) {
            arr.push([]);
            for (var o = 0; o &lt; this.Width; o++) {
                if (i == 0 || i == this.Height - 1 || o == 0 || o == this.Width - 1) arr[i].push(new Goods(&quot;墙&quot;, GoodsType.Bar));
                else arr[i].push(new Goods(&quot;空地&quot;, GoodsType.Road));
            }
        }
        this.Cells = arr;
        var resultHTML = &quot;&quot;;
        for (var i = 0; i &lt; this.Cells.length; i++) {
            for (var o = 0; o &lt; this.Cells[0].length; o++) {
                resultHTML += &#39;&lt;div class=&quot;block &#39; + this.Cells[i][o].Type.CssClass + &#39;&quot;&gt;&lt;/div&gt;&#39;;
            }
            resultHTML += &quot;&lt;br /&gt;&quot;;
        }
        element.innerHTML = resultHTML;
    }

<span id='Canvas-method-Play'>    /**
</span>     * 开始游戏
     * @method Play
     */
    this.Play = function () {
        this.Players.push(new Player(&quot;刘林&quot;, UserGroup.Blue));

        var time = setInterval(function () {

        }, this.Speed);
    }
}</pre>
</body>
</html>
